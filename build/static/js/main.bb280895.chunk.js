(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(e,t){e.exports={CHECK_USERNAME:"CHECK_USERNAME",USER_LOGGED_IN:"USER_LOGGED_IN",UPDATE_USER_LIST:"UPDATE_USER_LIST",USER_RECONNECTED:"USER_RECONNECTED",USER_DATA:"USER_DATA",GAME_LOG_MESSAGE:"GAME_LOG_MESSAGE"}},25:function(e,t,n){},41:function(e,t,n){e.exports=n(75)},75:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(38),c=n.n(o),r=(n(25),n(7)),i=n(8),l=n(10),u=n(9),m=n(11),E=n(39),h=n.n(E),d=n(2),g=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({name:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.props.socket.emit(d.CHECK_USERNAME,n.state.name,n.handleUsernameCheck)},n.handleUsernameCheck=function(e,t,a){t?n.setState({error:"This name is already taken."}):a?(n.setState({error:"A user with this name had disconnected. Are you trying to log back in as ".concat(e,"?")}),n.setState({logBackInAs:e})):(n.setState({error:"",logBackIn:""}),n.props.createUser(e))},n.handleLogBackIn=function(){console.log("Logging back in as ".concat(n.state.logBackInAs)),n.props.socket.emit(d.USER_RECONNECTED,n.state.logBackInAs)},n.state={name:"",error:"",logBackInAs:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit,className:"loginForm"},s.a.createElement("label",{htmlFor:"username"},"Name:",s.a.createElement("input",{type:"text",id:"username",value:this.state.username,onChange:this.handleChange})),s.a.createElement("input",{type:"submit",value:"Submit"})),s.a.createElement("div",{className:"error"},this.state.error,this.state.logBackInAs?s.a.createElement("button",{onClick:this.handleLogBackIn},"Log back in"):null))}}]),t}(s.a.Component),k=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={userList:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.socket;t&&t.on(d.UPDATE_USER_LIST,function(t){e.setState({userList:t}),console.log(t)})}},{key:"render",value:function(){var e=this.state.userList;return s.a.createElement("div",null,"Players: ",e.join(", "))}}]),t}(s.a.Component),S=n(40),f=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).scrollDown=function(){var e=n.container.current;e.scrollTop=e.scrollHeight},n.container=s.a.createRef(),n.state={logMessages:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on(d.GAME_LOG_MESSAGE,function(t){e.setState(function(e,n){return{logMessages:[].concat(Object(S.a)(e.logMessages),[t])}})})}},{key:"componentDidUpdate",value:function(){this.scrollDown()}},{key:"render",value:function(){return s.a.createElement("div",{className:"GameLog"},s.a.createElement("h3",null,"Game Log"),s.a.createElement("div",{className:"LogMessageContainer",ref:this.container},this.state.logMessages.map(function(e,t){return s.a.createElement("div",{key:t,className:"LogMessage"},e)})))}}]),t}(s.a.Component),p=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).createUser=function(e){var t={name:e};n.setState({user:t}),n.state.socket.emit(d.USER_LOGGED_IN,t)},n.sendAhoy=function(){n.state.socket.emit("ahoy",n.state.user.name)},n.state={socket:null,user:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=h()("/");t.on("connect",function(){e.state.user?(t.emit(d.USER_RECONNECTED,e.state.user.name),console.log("Reconnected to server, my socket ID is ".concat(t.id))):console.log("Connected to server, my socket ID is ".concat(t.id))}),t.on(d.USER_DATA,function(t){return e.setState({user:t})}),this.setState({socket:t})}},{key:"render",value:function(){var e=this.state,t=e.socket,n=e.user;return s.a.createElement("div",{className:"App"},n?s.a.createElement("div",{className:"layout"},s.a.createElement("span",null,"Logged in! Welcome ",n.name,"."),s.a.createElement(k,{socket:t}),s.a.createElement(f,{socket:t}),s.a.createElement("br",null),s.a.createElement("button",{onClick:this.sendAhoy},"Ahoy!")):s.a.createElement(g,{socket:t,createUser:this.createUser}))}}]),t}(s.a.Component);c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(p,null)),document.getElementById("root"))}},[[41,2,1]]]);
//# sourceMappingURL=main.bb280895.chunk.js.map