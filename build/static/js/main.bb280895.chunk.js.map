{"version":3,"sources":["SocketEvents.js","components/LoginForm.js","components/UserList.js","components/GameLog.js","App.js","index.js"],"names":["module","exports","CHECK_USERNAME","USER_LOGGED_IN","UPDATE_USER_LIST","USER_RECONNECTED","USER_DATA","GAME_LOG_MESSAGE","LoginForm","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","event","setState","name","target","value","handleSubmit","preventDefault","socket","emit","state","handleUsernameCheck","isNameTaken","isDisconnectedUser","error","concat","logBackInAs","logBackIn","createUser","handleLogBackIn","console","log","react_default","a","createElement","onSubmit","className","htmlFor","type","id","username","onChange","onClick","React","Component","UserList","userList","_this2","on","join","GameLog","scrollDown","c","container","current","scrollTop","scrollHeight","createRef","logMessages","message","prevState","prevProps","toConsumableArray","ref","map","index","key","App","user","sendAhoy","io","_this$state","components_UserList","components_GameLog","components_LoginForm","ReactDOM","render","StrictMode","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.bb280895.chunk.js","sourcesContent":["module.exports = {\n  CHECK_USERNAME:   \"CHECK_USERNAME\",\n  USER_LOGGED_IN:   \"USER_LOGGED_IN\",\n  UPDATE_USER_LIST: \"UPDATE_USER_LIST\",\n  USER_RECONNECTED: \"USER_RECONNECTED\",\n  USER_DATA:        \"USER_DATA\",\n  GAME_LOG_MESSAGE: \"GAME_LOG_MESSAGE\",\n};\n","import React from 'react';\nimport { CHECK_USERNAME, USER_RECONNECTED } from '../SocketEvents';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      error: \"\",\n      logBackInAs: \"\"\n    };\n  }\n\n  handleChange = (event) => {\n    this.setState({ name: event.target.value });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.props.socket.emit(CHECK_USERNAME,\n      this.state.name,\n      this.handleUsernameCheck\n    );\n  }\n\n  handleUsernameCheck = (name, isNameTaken, isDisconnectedUser) => {\n    if (isNameTaken) {\n      this.setState({ error: \"This name is already taken.\" });\n    } else if (isDisconnectedUser) {\n      this.setState({ error:\n        `A user with this name had disconnected. Are you trying to log back in as ${name}?`\n      })\n      this.setState({ logBackInAs: name });\n    } else {\n      this.setState({ error: \"\", logBackIn: \"\" });\n      this.props.createUser(name);\n    }\n  }\n\n  handleLogBackIn = () => {\n    console.log(`Logging back in as ${this.state.logBackInAs}`);\n    this.props.socket.emit(USER_RECONNECTED, this.state.logBackInAs);\n  }\n\n  render() {\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit} className=\"loginForm\">\n          <label htmlFor=\"username\">\n            Name:\n            <input\n              type=\"text\"\n              id=\"username\"\n              value={this.state.username}\n              onChange={this.handleChange}\n              />\n          </label>\n          <input type=\"submit\" value=\"Submit\" />\n        </form>\n\n        <div className=\"error\">\n          {this.state.error}\n          { this.state.logBackInAs\n            ? <button onClick={this.handleLogBackIn}>Log back in</button>\n            : null\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n","import React from 'react';\nimport { UPDATE_USER_LIST } from '../SocketEvents';\n\nclass UserList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userList: []\n    }\n  }\n\n  componentDidMount() {\n    const { socket } = this.props;\n    if (socket) {\n      socket.on(UPDATE_USER_LIST, (userList) => {\n        this.setState({ userList });\n        console.log(userList);\n      });\n    }\n  }\n\n  render() {\n    const { userList } = this.state;\n    return (\n      <div>Players: {userList.join(', ')}</div>\n    );\n  }\n}\n\nexport default UserList;\n","import React from 'react';\nimport { GAME_LOG_MESSAGE } from '../SocketEvents';\n\nclass GameLog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.container = React.createRef();\n    this.state = {\n      logMessages: [],\n    }\n  }\n\n  componentDidMount() {\n    this.props.socket.on(GAME_LOG_MESSAGE, (message) => {\n      this.setState((prevState, prevProps) => (\n        { logMessages: [...prevState.logMessages, message] }\n      ));\n    });\n  }\n\n  componentDidUpdate() {\n    this.scrollDown()\n  }\n\n  scrollDown = () => {\n    const c = this.container.current;\n    c.scrollTop = c.scrollHeight;\n  }\n\n  render() {\n    return (\n      <div className=\"GameLog\">\n        <h3>Game Log</h3>\n        <div className=\"LogMessageContainer\" ref={this.container}>\n          {\n            this.state.logMessages.map((message, index) => {\n              return (\n                <div key={index} className=\"LogMessage\">{message}</div>\n              );\n            })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default GameLog;\n","import React from 'react';\nimport './index.css';\nimport io from 'socket.io-client';\nimport LoginForm from './components/LoginForm';\nimport UserList from './components/UserList';\nimport GameLog from './components/GameLog';\n\nimport {\n  USER_RECONNECTED,\n  USER_LOGGED_IN,\n  USER_DATA\n} from './SocketEvents';\n\nconst socketUrl = \"/\";                        // FOR BUILD\n//const socketUrl = \"http://192.168.0.101:3030\"; // FOR DEVELOPMENT\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      socket: null,\n      user: null\n    };\n  }\n\n  componentDidMount() {\n    const socket = io(socketUrl);\n\n    socket.on('connect', () => {\n      if (this.state.user) {\n        socket.emit(USER_RECONNECTED, this.state.user.name);\n        console.log(`Reconnected to server, my socket ID is ${socket.id}`);\n      } else {\n        console.log(`Connected to server, my socket ID is ${socket.id}`);\n      }\n    });\n\n    socket.on(USER_DATA, user => this.setState({ user }));\n\n    this.setState({ socket });\n  }\n\n  createUser = (name) => {\n    const user = { name };\n    this.setState({ user });\n    this.state.socket.emit(USER_LOGGED_IN, user);\n  }\n\n  sendAhoy = () => {\n    this.state.socket.emit('ahoy', this.state.user.name);\n  }\n\n  render() {\n    const { socket, user } = this.state;\n    return (\n      <div className=\"App\">\n        {\n          !user\n          ?\n          <LoginForm socket={socket} createUser={this.createUser} />\n          :\n          <div className=\"layout\">\n            <span>Logged in! Welcome {user.name}.</span>\n            <UserList socket={socket} />\n            <GameLog socket={socket} />\n            <br />\n            <button onClick={this.sendAhoy}>Ahoy!</button>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}