(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t){e.exports={CHECK_USERNAME:"CHECK_USERNAME",USER_LOGGED_IN:"USER_LOGGED_IN",USER_RECONNECTED:"USER_RECONNECTED",DICE__DRAW_DIE:"DICE__DRAW_DIE",DICE__PUT_BACK:"DICE__PUT_BACK",DICE__SET_DIE:"DICE__SET_DIE",LOG_BACK_IN:"LOG_BACK_IN",GAME_LOG_MESSAGE:"GAME_LOG_MESSAGE",UPDATE_USERNAME_LIST:"UPDATE_USERNAME_LIST",UPDATE_DICE:"UPDATE_DICE"}},27:function(e,t,a){},42:function(e,t,a){e.exports=a(76)},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),o=a.n(c),s=(a(27),a(19)),i=a(2),l=a(3),u=a(5),m=a(4),E=a(6),h=a(41),d=a.n(h),p=a(1),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState({username:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.socket.emit(p.CHECK_USERNAME,a.state.username,a.handleUsernameCheck)},a.handleUsernameCheck=function(e,t,n){t?a.setState({error:"This username is already taken."}):n?(a.setState({error:"A user with this name had disconnected. Are you trying to log back in as ".concat(e,"?")}),a.setState({logBackInAs:e})):(a.setState({error:"",logBackInAs:""}),a.props.setUsername(e))},a.handleLogBackIn=function(){var e=a.state.logBackInAs;console.log("Logging back in as ".concat(e)),a.props.socket.emit(p.USER_RECONNECTED,e)},a.state={username:"",error:"",logBackInAs:""},a}return Object(E.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"loginForm"},r.a.createElement("label",{htmlFor:"username"},"Name:"),r.a.createElement("input",{type:"text",id:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("div",{className:"error"},this.state.error,this.state.logBackInAs?r.a.createElement("button",{onClick:this.handleLogBackIn},"Log back in"):null))}}]),t}(r.a.Component),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).scrollDown=function(){var e=a.container.current;e.scrollTop=e.scrollHeight},a.container=r.a.createRef(),a.state={logMessages:[]},a}return Object(E.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on(p.GAME_LOG_MESSAGE,function(t){e.setState(function(e){return{logMessages:[].concat(Object(s.a)(e.logMessages),[t])}})})}},{key:"componentDidUpdate",value:function(){this.scrollDown()}},{key:"render",value:function(){return r.a.createElement("div",{className:"GameLog"},r.a.createElement("h3",null,"Game Log"),r.a.createElement("div",{className:"LogMessageContainer",ref:this.container},this.state.logMessages.map(function(e,t){return r.a.createElement("div",{key:t,className:"LogMessage"},e)})))}}]),t}(r.a.Component),k=a(13),_=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e;switch(this.props.die.value){case"blank":e=r.a.createElement(k.e,null);break;case"two":e=r.a.createElement(k.d,null);break;case"four":e=r.a.createElement(k.b,null);break;case"trio":e=r.a.createElement(k.c,null);break;default:e=r.a.createElement(k.a,null)}return r.a.createElement("span",{className:"DieIcon",style:{color:this.props.die.color}},e)}}]),t}(r.a.Component),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).putBack=function(){var e=a.props,t=e.socket,n=e.die;t.emit(p.DICE__PUT_BACK,n)},a.roll=function(){var e=["blank","two","two","four","four","trio"],t=e[Math.floor(Math.random()*e.length)];a.setState({selectedValue:t}),a.setDie(t)},a.handleChange=function(e){var t=e.target.value;a.setState({selectedValue:t}),a.setDie(t)},a.setDie=function(e){var t=a.props,n=t.socket,r=t.die;n.emit(p.DICE__SET_DIE,r,e)},a.state={selectedValue:"cube"},a}return Object(E.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.die;return r.a.createElement("div",{className:"DieContainer"},r.a.createElement(_,{die:e}),r.a.createElement("button",{onClick:this.putBack},"Put back"),r.a.createElement("button",{onClick:this.roll},"Roll"),r.a.createElement("label",null,"Set value:"),r.a.createElement("select",{value:this.state.selectedValue,onChange:this.handleChange},r.a.createElement("option",{value:"cube",disabled:!0}),r.a.createElement("option",{value:"trio"},"Trio"),r.a.createElement("option",{value:"four"},"Four"),r.a.createElement("option",{value:"two"},"Two"),r.a.createElement("option",{value:"blank"},"Blank")))}}]),t}(r.a.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).drawDie=function(){var e=a.props.dice.filter(function(e){return!e.isOnTable}),t=e[Math.floor(Math.random()*e.length)];a.props.socket.emit(p.DICE__DRAW_DIE,t)},a}return Object(E.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.socket,n=t.username,c=t.dice,o=t.isForThisUser,s=[],i=[];return c&&(s=c.filter(function(e){return!e.isOnTable}),i=c.filter(function(e){return e.isOnTable})),e=o?i.map(function(e){return r.a.createElement(D,{key:e.id,socket:a,die:e})}):i.map(function(e){return r.a.createElement(_,{key:e.id,die:e})}),r.a.createElement("div",{className:"DiceContainer"},r.a.createElement("h3",null,"".concat(n,"'s dice")),r.a.createElement("div",{className:"DiceInBagContainer"},r.a.createElement("p",null,"Dice in bag:"),s.map(function(e){return r.a.createElement(_,{key:e.id,die:e})})),o&&r.a.createElement("button",{disabled:0===s.length,onClick:this.drawDie},"Draw"),r.a.createElement("div",{className:"DiceOnTableContainer"},r.a.createElement("p",null,"Dice on table:"),e))}}]),t}(r.a.Component),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setUsername=function(e){a.setState({username:e}),a.state.socket.emit(p.USER_LOGGED_IN,e)},a.sendAhoy=function(){a.state.socket.emit("ahoy",a.state.username)},a.state={socket:null,username:null,usernameList:[],diceDict:new Map},a}return Object(E.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=d()("/");this.setState({socket:t}),t.on("connect",function(){e.state.username?(t.emit(p.USER_RECONNECTED,e.state.username),console.log("Reconnected to server, my socket ID is ".concat(t.id))):console.log("Connected to server, my socket ID is ".concat(t.id))}),t.on(p.LOG_BACK_IN,function(t){return e.setState({username:t})}),t.on(p.UPDATE_USERNAME_LIST,function(t){return e.setState({usernameList:t})}),t.on(p.UPDATE_DICE,function(t,a){e.setState(function(e){return{diceDict:new Map([].concat(Object(s.a)(e.diceDict),[[t,a]]))}})})}},{key:"render",value:function(){var e,t=this.state,a=t.socket,n=t.username,c=t.usernameList,o=t.diceDict;return n&&(e=c.filter(function(e){return e!==n})),r.a.createElement("div",{className:"App"},n?r.a.createElement("div",{className:"layout"},r.a.createElement("span",null,"Logged in! Welcome ",n,"."),r.a.createElement("div",null,"Players: ",c.join(", ")),r.a.createElement(C,{socket:a,username:n,dice:o.get(n),isForThisUser:!0}),r.a.createElement("div",{className:"DiceContainersForOtherUsers"},e.map(function(e){return r.a.createElement(C,{key:e,socket:a,username:e,dice:o.get(e),isForThisUser:!1})})),r.a.createElement(f,{socket:a}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.sendAhoy},"Ahoy!")):r.a.createElement(b,{socket:a,setUsername:this.setUsername}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))}},[[42,2,1]]]);
//# sourceMappingURL=main.e10c413c.chunk.js.map