(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t){e.exports={CHECK_USERNAME:"CHECK_USERNAME",USER_LOGGED_IN:"USER_LOGGED_IN",UPDATE_USERNAME_LIST:"UPDATE_USERNAME_LIST",USER_RECONNECTED:"USER_RECONNECTED",USER_DATA:"USER_DATA",GAME_LOG_MESSAGE:"GAME_LOG_MESSAGE",DICE__SET_DIE:"DICE__SET_DIE",DICE__TAKE_DIE:"DICE__TAKE_DIE",DICE__PUT_BACK:"DICE__PUT_BACK"}},28:function(e,t,n){},43:function(e,t,n){e.exports=n(77)},77:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(41),r=n.n(o),s=(n(28),n(2)),i=n(3),l=n(5),u=n(4),E=n(6),m=n(42),d=n.n(m),h=n(1),p=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({name:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.props.socket.emit(h.CHECK_USERNAME,n.state.name,n.handleUsernameCheck)},n.handleUsernameCheck=function(e,t,a){t?n.setState({error:"This name is already taken."}):a?(n.setState({error:"A user with this name had disconnected. Are you trying to log back in as ".concat(e,"?")}),n.setState({logBackInAs:e})):(n.setState({error:"",logBackIn:""}),n.props.createUser(e))},n.handleLogBackIn=function(){console.log("Logging back in as ".concat(n.state.logBackInAs)),n.props.socket.emit(h.USER_RECONNECTED,n.state.logBackInAs)},n.state={name:"",error:"",logBackInAs:""},n}return Object(E.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit,className:"loginForm"},c.a.createElement("label",{htmlFor:"username"},"Name:"),c.a.createElement("input",{type:"text",id:"username",value:this.state.username,onChange:this.handleChange}),c.a.createElement("input",{type:"submit",value:"Submit"})),c.a.createElement("div",{className:"error"},this.state.error,this.state.logBackInAs?c.a.createElement("button",{onClick:this.handleLogBackIn},"Log back in"):null))}}]),t}(c.a.Component),f=n(15),b=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).scrollDown=function(){var e=n.container.current;e.scrollTop=e.scrollHeight},n.container=c.a.createRef(),n.state={logMessages:[]},n}return Object(E.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on(h.GAME_LOG_MESSAGE,function(t){e.setState(function(e,n){return{logMessages:[].concat(Object(f.a)(e.logMessages),[t])}})})}},{key:"componentDidUpdate",value:function(){this.scrollDown()}},{key:"render",value:function(){return c.a.createElement("div",{className:"GameLog"},c.a.createElement("h3",null,"Game Log"),c.a.createElement("div",{className:"LogMessageContainer",ref:this.container},this.state.logMessages.map(function(e,t){return c.a.createElement("div",{key:t,className:"LogMessage"},e)})))}}]),t}(c.a.Component),k=n(26),g=n(13),v=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e;switch(this.props.die.value){case"blank":e=c.a.createElement(g.e,null);break;case"two":e=c.a.createElement(g.d,null);break;case"four":e=c.a.createElement(g.b,null);break;case"trio":e=c.a.createElement(g.c,null);break;default:e=c.a.createElement(g.a,null)}return c.a.createElement("span",{className:"DieIcon",style:{color:this.props.die.color}},e)}}]),t}(c.a.Component),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).roll=function(){var e=["blank","two","two","four","four","trio"],t=e[Math.floor(Math.random()*e.length)];n.props.setDie(n.props.die,t),n.setState({selectedValue:t})},n.handleChange=function(e){var t=e.target.value;n.props.setDie(n.props.die,t),n.setState({selectedValue:t})},n.state={selectedValue:"cube"},n}return Object(E.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.die;return c.a.createElement("div",{className:"DieContainer"},c.a.createElement(v,{die:t}),c.a.createElement("button",{onClick:function(){return e.props.putBack(t)}},"Put back"),c.a.createElement("button",{onClick:this.roll},"Roll"),c.a.createElement("label",null,"Set value:"),c.a.createElement("select",{value:this.state.selectedValue,onChange:this.handleChange},c.a.createElement("option",{value:"cube",disabled:!0}),c.a.createElement("option",{value:"trio"},"Trio"),c.a.createElement("option",{value:"four"},"Four"),c.a.createElement("option",{value:"two"},"Two"),c.a.createElement("option",{value:"blank"},"Blank")))}}]),t}(c.a.Component),D="green",C="purple",O="orange",A=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).takeDie=function(e){n.setState(function(t,n){return{diceInBag:t.diceInBag.filter(function(t){return t.id!==e.id}),diceOnTable:[].concat(Object(f.a)(t.diceOnTable),[e])}})},n.drawDieAndAnnounce=function(){var e=n.state.diceInBag,t=e[Math.floor(Math.random()*e.length)];n.takeDie(t),n.props.socket.emit(h.DICE__TAKE_DIE,t),console.log(t)},n.putBack=function(e){var t=Object(k.a)({},e,{value:null});n.setState(function(e,n){return{diceInBag:[].concat(Object(f.a)(e.diceInBag),[t]),diceOnTable:e.diceOnTable.filter(function(e){return e.id!==t.id})}})},n.putBackAndAnnounce=function(e){n.putBack(e),n.props.socket.emit(h.DICE__PUT_BACK,e)},n.setDie=function(e,t){n.setState(function(n,a){console.log(t);var c=n.diceOnTable,o=[];return c.forEach(function(n){if(n.id===e.id){var a=Object(k.a)({},e,{value:t});o.push(a)}else o.push(n)}),console.log(o),{diceOnTable:o}})},n.setDieAndAnnounce=function(e,t){n.setDie(e,t),n.props.socket.emit(h.DICE__SET_DIE,e,t)};var a=[];return[D,C,O].forEach(function(e){for(var t=0;t<4;t++){var c={color:e,id:n.props.username+"_"+e+t,value:null};a.push(c)}}),n.state={diceInBag:a,diceOnTable:[]},n}return Object(E.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.socket,a=t.username,c="".concat(h.DICE__TAKE_DIE,"-").concat(a);n.on(c,function(t){console.log("".concat(c)),console.log(t),e.takeDie(t)});var o="".concat(h.DICE__PUT_BACK,"-").concat(a);n.on(o,function(t){console.log("".concat(o)),console.log(t),e.putBack(t)});var r="".concat(h.DICE__SET_DIE,"-").concat(a);n.on(r,function(t,n){console.log("".concat(r)),console.log(t),e.setDie(t,n)})}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.username,o=n.isForThisUser,r=this.state,s=r.diceInBag,i=r.diceOnTable;return e=o?i.map(function(e){return c.a.createElement(_,{key:e.id,die:e,putBack:t.putBackAndAnnounce,setDie:t.setDieAndAnnounce})}):i.map(function(e){return c.a.createElement(v,{key:e.id,die:e})}),c.a.createElement("div",{className:"DiceContainer"},c.a.createElement("h3",null,"".concat(a,"'s dice")),c.a.createElement("div",{className:"DiceInBagContainer"},c.a.createElement("p",null,"Dice in bag:"),s.map(function(e){return c.a.createElement(v,{key:e.id,die:e})})),o&&c.a.createElement("button",{onClick:this.drawDieAndAnnounce,disabled:0===s.length},"Draw"),c.a.createElement("div",{className:"DiceOnTableContainer"},c.a.createElement("p",null,"Dice on table:"),e))}}]),t}(c.a.Component),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).createUser=function(e){var t={name:e};n.setState({user:t}),n.state.socket.emit(h.USER_LOGGED_IN,t)},n.sendAhoy=function(){n.state.socket.emit("ahoy",n.state.user.name)},n.state={socket:null,user:null,usernameList:[]},n}return Object(E.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=d()("/");t.on("connect",function(){e.state.user?(t.emit(h.USER_RECONNECTED,e.state.user.name),console.log("Reconnected to server, my socket ID is ".concat(t.id))):console.log("Connected to server, my socket ID is ".concat(t.id))}),t.on(h.USER_DATA,function(t){return e.setState({user:t})}),t.on(h.UPDATE_USERNAME_LIST,function(t){return e.setState({usernameList:t})}),this.setState({socket:t})}},{key:"render",value:function(){var e,t=this.state,n=t.socket,a=t.user,o=t.usernameList;return a&&(e=o.filter(function(e){return e!==a.name})),c.a.createElement("div",{className:"App"},a?c.a.createElement("div",{className:"layout"},c.a.createElement("span",null,"Logged in! Welcome ",a.name,"."),c.a.createElement("div",null,"Players: ",o.join(", ")),c.a.createElement(A,{socket:n,username:a.name,isForThisUser:!0}),c.a.createElement("div",{className:"DiceContainersForOtherUsers"},e.map(function(e){return c.a.createElement(A,{key:e,socket:n,username:e,isForThisUser:!1})})),c.a.createElement(b,{socket:n}),c.a.createElement("br",null),c.a.createElement("button",{onClick:this.sendAhoy},"Ahoy!")):c.a.createElement(p,{socket:n,createUser:this.createUser}))}}]),t}(c.a.Component);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root"))}},[[43,2,1]]]);
//# sourceMappingURL=main.ebbf61f9.chunk.js.map