(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(e,t){e.exports={CHECK_USERNAME:"CHECK_USERNAME",USER_LOGGED_IN:"USER_LOGGED_IN",USER_RECONNECTED:"USER_RECONNECTED",START_GAME:"START_GAME",VOTE_TO_END_GAME:"VOTE_TO_END_GAME",END_GAME:"END_GAME",DICE__DRAW_DIE:"DICE__DRAW_DIE",DICE__PUT_BACK:"DICE__PUT_BACK",DICE__SET_DIE:"DICE__SET_DIE",HORIZON__DEAL_CARDS:"HORIZON__DEAL_CARDS",HORIZON__DRAFTED_CARDS:"HORIZON__DRAFTED_CARDS",LOG_BACK_IN:"LOG_BACK_IN",GAME_LOG_MESSAGE:"GAME_LOG_MESSAGE",UPDATE_USERNAME_LIST:"UPDATE_USERNAME_LIST",DICE__ENABLE_DRAWING:"DICE__ENABLE_DRAWING",DICE__UPDATE:"DICE__UPDATE",HORIZON__UPDATE_DECK:"HORIZON__UPDATE_DECK",HORIZON__UPDATE_HAND:"HORIZON__UPDATE_HAND",HORIZON__UPDATE_KEPT_CARDS:"HORIZON__UPDATE_KEPT_CARDS",HORIZON__ENABLE_DEALING:"HORIZON__ENABLE_DEALING",HORIZON__CHOSEN_CARD:"HORIZON__CHOSEN_CARD"}},28:function(e,t,n){},44:function(e,t,n){e.exports=n(80)},80:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(41),o=n.n(c),l=(n(28),n(4)),i=n(5),s=n(7),u=n(6),m=n(3),f=n(42),E=n.n(f),d=n(2);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var h=function(e){Object(s.a)(n,e);var t=p(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({username:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.socket,n=a.state.username;t.emit(d.CHECK_USERNAME,n,a.handleUsernameCheck)},a.handleUsernameCheck=function(e,t){var n=a.props.setUsername;switch(t){case"USER_DISCONNECTED":a.setState({logBackInAs:e,error:"A user with this name had disconnected. "+"Are you trying to log back in as ".concat(e,"?")});break;case"GAME_ALREADY_STARTED":a.setState({error:"Sorry, the game has already started."});break;case"USERNAME_TAKEN":a.setState({error:"This username is already taken."});break;case"USERNAME_BLANK":a.setState({error:"Your username cannot be blank."});break;default:a.setState({error:"",logBackInAs:null}),n(e)}},a.handleLogBackIn=function(){var e=a.state.logBackInAs;a.props.socket.emit(d.USER_RECONNECTED,e)},a.textInput=r.a.createRef(),a.state={username:"",error:"",logBackInAs:null},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.textInput.current.focus()}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.error,a=e.logBackInAs;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"LoginForm"},r.a.createElement("label",{htmlFor:"username"},"Name:",r.a.createElement("input",{type:"text",id:"username",value:t,onChange:this.handleChange,ref:this.textInput})),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("div",{className:"error"},n,a&&r.a.createElement("button",{onClick:this.handleLogBackIn,type:"button"},"Log back in")))}}]),n}(r.a.Component);h.defaultProps={socket:null};var _=h;var v=function(e){var t=e.usernameList;return r.a.createElement("div",{className:"UsernameList"},"Players: ",t.map(function(t,n){return r.a.createElement("span",{key:t},n?", ":"",r.a.createElement("span",{className:"".concat(t===e.username?"ThisUsername":"")},t))}))},O=n(43);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var b=function(e){Object(s.a)(n,e);var t=D(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).scrollDown=function(){var e=a.container.current;e.scrollTop=e.scrollHeight},a.container=r.a.createRef(),a.state={gameLogMessages:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on(d.GAME_LOG_MESSAGE,function(t){return e.setState({gameLogMessages:t})})}},{key:"componentDidUpdate",value:function(){this.scrollDown()}},{key:"render",value:function(){var e=this.state.gameLogMessages;return r.a.createElement("div",{className:"GameLog container"},r.a.createElement("h3",null,"Game Log"),r.a.createElement("div",{className:"LogMessageContainer",ref:this.container},e.map(function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{key:n,className:"LogMessage"},a)})))}}]),n}(r.a.Component);b.defaultProps={socket:null};var k=b,C=n(14);var R=function(e){var t,n=e.die;switch(n.value){case"blank":t=r.a.createElement(C.e,null);break;case"two":t=r.a.createElement(C.d,null);break;case"four":t=r.a.createElement(C.b,null);break;case"trio":t=r.a.createElement(C.c,null);break;default:t=r.a.createElement(C.a,null)}var a=n.color,c="orange"===a?"DarkOrange":a;return r.a.createElement("span",{className:"DieIcon",style:{color:c}},t)};function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var y=function(e){Object(s.a)(n,e);var t=A(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).putBack=function(){var e=a.props,t=e.socket,n=e.die;t.emit(d.DICE__PUT_BACK,n)},a.roll=function(){var e=["blank","two","two","four","four","trio"],t=e[Math.floor(Math.random()*e.length)];a.setDie(t)},a.handleChange=function(e){var t=e.target.value;a.setState({selectedValue:t}),a.setDie(t)},a.setDie=function(e){var t=a.props,n=t.socket,r=t.die;n.emit(d.DICE__SET_DIE,r,e)},a.state={selectedValue:e.die.value||"cube"},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.die,t=this.state.selectedValue;return r.a.createElement("div",{className:"DieContainer container"},r.a.createElement(R,{die:e}),r.a.createElement("button",{onClick:this.putBack,type:"button"},"Put back"),r.a.createElement("button",{onClick:this.roll,type:"button"},"Roll"),r.a.createElement("label",{htmlFor:"DieSelector"},"Set value:",r.a.createElement("select",{value:t,onChange:this.handleChange,id:"DieSelector"},r.a.createElement("option",{value:"cube",disabled:!0}," "),r.a.createElement("option",{value:"trio"},"Trio"),r.a.createElement("option",{value:"four"},"Four"),r.a.createElement("option",{value:"two"},"Two"),r.a.createElement("option",{value:"blank"},"Blank"))))}}]),n}(r.a.Component);y.defaultProps={socket:null};var N=y;function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var g=function(e){Object(s.a)(n,e);var t=S(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).drawDie=function(){var e=a.state.dice,t=a.props.socket,n=e.filter(function(e){return!e.isOnTable}),r=n[Math.floor(Math.random()*n.length)];t.emit(d.DICE__DRAW_DIE,r)},a.state={dice:[],isDrawingEnabled:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.socket;t.on(d.DICE__ENABLE_DRAWING,function(t){return e.setState({isDrawingEnabled:t})}),t.on(d.DICE__UPDATE,function(t,n){e.props.username===t&&e.setState({dice:n})})}},{key:"render",value:function(){var e,t=this.props,n=t.socket,a=t.username,c=t.isForThisUser,o=this.state,l=o.dice,i=o.isDrawingEnabled,s=c?"ThisUser":"Opponent",u=[],m=[];return l&&(u=l.filter(function(e){return!e.isOnTable}),m=l.filter(function(e){return e.isOnTable})),e=c?m.map(function(e){return r.a.createElement(N,{key:e.id,socket:n,die:e})}):m.map(function(e){return r.a.createElement(R,{key:e.id,die:e})}),r.a.createElement("div",{className:"DiceContainer container"},r.a.createElement("h3",null,"".concat(a,"'s dice")),r.a.createElement("div",{className:"DiceFlexbox ".concat(s)},r.a.createElement("div",{className:"DiceInBagContainer ".concat(s)},r.a.createElement("p",null,"Dice in bag"),u.map(function(e){return r.a.createElement(R,{key:e.id,die:e})}),c&&r.a.createElement("button",{disabled:0===u.length||!i,onClick:this.drawDie,type:"button"},"Draw")),r.a.createElement("div",{className:"DiceOnTableContainer ".concat(s)},r.a.createElement("p",null,"Dice on table"),e)))}}]),n}(r.a.Component);g.defaultProps={socket:null};var I=g,T=n(21),G=n(20);function P(e){var t=e.card,n=e.checked,a=t.numGreen,c=t.numPurple,o=t.numOrange;return r.a.createElement("div",{className:"HorizonCard ".concat(n?"highlighted":"")},r.a.createElement("p",null,Object(T.a)(Array(a).keys()).map(function(e){return r.a.createElement(G.a,{key:e,style:{color:"green"}})})),r.a.createElement("p",null,Object(T.a)(Array(c).keys()).map(function(e){return r.a.createElement(G.a,{key:e,style:{color:"purple"}})})),r.a.createElement("p",null,Object(T.a)(Array(o).keys()).map(function(e){return r.a.createElement(G.a,{key:e,style:{color:"DarkOrange"}})})))}P.defaultProps={checked:!1};var U=P;function j(e){var t=e.topCard;return r.a.createElement(U,{card:t})}j.defaultProps={topCard:{id:"blank_horizon_card",numGreen:0,numPurple:0,numOrange:0}};var L=j;function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var B=function(e){Object(s.a)(n,e);var t=M(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).dealCards=function(){a.props.socket.emit(d.HORIZON__DEAL_CARDS)},a.state={drawPile:[],discardPile:[],isDealingEnabled:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.socket;t.on(d.HORIZON__UPDATE_DECK,function(t,n){return e.setState({drawPile:t,discardPile:n})}),t.on(d.HORIZON__ENABLE_DEALING,function(t){return e.setState({isDealingEnabled:t})})}},{key:"render",value:function(){var e=this.state,t=e.drawPile,n=e.discardPile,a=e.isDealingEnabled,c=0!==n.length?n[n.length-1]:void 0;return r.a.createElement("div",{className:"HorizonDeckContainer container"},r.a.createElement("h3",null,"Horizon deck"),r.a.createElement("div",{className:"DrawPileContainer"},r.a.createElement("p",null,"Draw pile"),r.a.createElement("p",{className:"NumCards"},"(".concat(t.length," card").concat(1!==t.length?"s":"",")")),r.a.createElement(L,null),r.a.createElement("button",{onClick:this.dealCards,disabled:!a,type:"button"},"Deal")),r.a.createElement("div",{className:"DiscardPileContainer"},r.a.createElement("p",null,"Discard pile"),r.a.createElement("p",{className:"NumCards"},"(".concat(n.length," ")+"card".concat(1!==n.length?"s":"",")")),r.a.createElement(L,{topCard:c})))}}]),n}(r.a.Component);B.defaultProps={socket:null};var H=B;function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var Z=function(e){Object(s.a)(n,e);var t=w(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(function(t){return t.isSubmitted?t:{selectedOption:e.target.value}})},a.handleSubmit=function(e){e.preventDefault(),a.setState({isSubmitted:!0});var t=a.state,n=t.selectedOption,r=t.hand,c=a.props.socket,o=n,l=r.find(function(e){return e.id===o}),i=r.filter(function(e){return e.id!==o});c.emit(d.HORIZON__DRAFTED_CARDS,l,i)},a.state={hand:[],keptCards:[],selectedOption:null,isSubmitted:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.socket;t.on(d.HORIZON__UPDATE_HAND,function(t){return e.setState({hand:t,selectedOption:null})}),t.on(d.HORIZON__UPDATE_KEPT_CARDS,function(t){return e.setState({keptCards:t,isSubmitted:!1})}),t.on(d.HORIZON__CHOSEN_CARD,function(t){t&&e.setState({selectedOption:t.id,isSubmitted:!0})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.hand,a=t.keptCards,c=t.selectedOption,o=t.isSubmitted,l=o||null===c;return 0===a.length&&0===n.length?null:r.a.createElement("div",{className:"HorizonHand container"},r.a.createElement("h3",null,"Your hand of Horizon cards"),a.length>0&&r.a.createElement("div",{className:"KeptCardsContainer"},r.a.createElement("p",null,"Cards you kept"),a.map(function(e){return r.a.createElement(U,{card:e,key:e.id})})),n.length>0&&r.a.createElement("div",{className:"CardsToDraftContainer"},r.a.createElement("p",null,"Cards to draft"),r.a.createElement("form",{onSubmit:this.handleSubmit},n.map(function(t){return r.a.createElement("label",{key:t.id,htmlFor:"radio_".concat(t.id)},r.a.createElement("input",{id:"radio_".concat(t.id),type:"radio",value:t.id,checked:c===t.id,onChange:e.handleChange}),r.a.createElement(U,{card:t,checked:c===t.id}))}),r.a.createElement("input",{type:"submit",value:"Choose",disabled:l})),o&&r.a.createElement("p",null,"(Waiting for other players to choose.)")))}}]),n}(r.a.Component);Z.defaultProps={socket:null};var x=Z;var K=function(e){var t=e.socket,n=e.username,a=e.opponents;return r.a.createElement("div",{className:"GameInterface"},r.a.createElement(I,{socket:t,username:n,isForThisUser:!0}),r.a.createElement("div",{className:"OpponentsDiceFlexbox"},a.map(function(e){return r.a.createElement(I,{key:n,socket:t,username:e,isForThisUser:!1})})),r.a.createElement("div",{className:"HorizonFlexbox"},r.a.createElement(H,{socket:t}),r.a.createElement(x,{socket:t})))};function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var V=function(e){Object(s.a)(n,e);var t=F(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).setUsername=function(e){a.setState({username:e}),a.state.socket.emit(d.USER_LOGGED_IN,e)},a.startGame=function(){a.state.socket.emit(d.START_GAME)},a.sendAhoy=function(){var e=a.state,t=e.socket,n=e.username;t.emit("ahoy",n)},a.endGameVote=function(){a.state.socket.emit(d.VOTE_TO_END_GAME)},a.state={socket:null,username:null,usernameList:[],isGameStarted:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=E()("/");this.setState({socket:t}),t.on("connect",function(){var n=e.state.username;n&&t.emit(d.USER_RECONNECTED,n)}),t.on(d.LOG_BACK_IN,function(t){return e.setState({username:t})}),t.on(d.UPDATE_USERNAME_LIST,function(t){return e.setState({usernameList:t})}),t.on(d.START_GAME,function(t){return e.setState({isGameStarted:t})}),t.on(d.END_GAME,function(){return e.setState({username:null,usernameList:[],isGameStarted:!1})})}},{key:"render",value:function(){var e,t=this.state,n=t.socket,a=t.username,c=t.usernameList,o=t.isGameStarted;return a&&(e=c.filter(function(e){return e!==a})),r.a.createElement("div",{className:"App"},a?r.a.createElement("div",{className:"Layout"},r.a.createElement(v,{username:a,usernameList:c}),o?r.a.createElement(K,{socket:n,username:a,opponents:e}):r.a.createElement("button",{onClick:this.startGame,type:"button"},"Start game"),r.a.createElement(k,{socket:n}),r.a.createElement("button",{onClick:this.sendAhoy,type:"button"},"Ahoy!"),r.a.createElement("button",{onClick:this.endGameVote,type:"button"},"Vote to end the game")):r.a.createElement(_,{socket:n,setUsername:this.setUsername}))}}]),n}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.f9bc9347.chunk.js.map